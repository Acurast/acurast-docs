"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1031],{2037:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var n=r(8168),o=(r(6540),r(5680)),a=r(1653),s=r(6025);const i={title:"Acurast Collator Onboarding",slug:"/acurast-protocol/collator-onboarding"},l=void 0,c={unversionedId:"acurast-protocol/collator-onboarding",id:"acurast-protocol/collator-onboarding",title:"Acurast Collator Onboarding",description:"This page describes the steps to take to onboard a collator on the Acurast Canary chain.",source:"@site/docs/acurast-protocol/collator-onboarding.mdx",sourceDirName:"acurast-protocol",slug:"/acurast-protocol/collator-onboarding",permalink:"/acurast-protocol/collator-onboarding",draft:!1,editUrl:"https://github.com/acurast/acurast-docs/docs/acurast-protocol/collator-onboarding.mdx",tags:[],version:"current",frontMatter:{title:"Acurast Collator Onboarding",slug:"/acurast-protocol/collator-onboarding"}},p={},u=[{value:"Pre registration checks",id:"pre-registration-checks",level:2},{value:"Set session key",id:"set-session-key",level:2},{value:"Register as candidate",id:"register-as-candidate",level:2}],d={toc:u},h="wrapper";function g({components:e,...t}){return(0,o.yg)(h,(0,n.A)({},d,t,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"This page describes the steps to take to onboard a collator on the Acurast Canary chain."),(0,o.yg)("h2",{id:"pre-registration-checks"},"Pre registration checks"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Make sure the node is setup with an identity as described in the ",(0,o.yg)("a",{parentName:"li",href:"/acurast-protocol/node-setup"},"Node Setup \u2197")," guide."),(0,o.yg)("li",{parentName:"ul"},"Make sure the node is fully synced."),(0,o.yg)("li",{parentName:"ul"},"Make sure the node was started with the ",(0,o.yg)("inlineCode",{parentName:"li"},"--collator")," flag."),(0,o.yg)("li",{parentName:"ul"},"Make sure the node is running on hardware that meet the minimum requirements. It is possible to check by looking at the node logs when it first starts:")),(0,o.yg)(a.A,{width:"1000px",sources:{light:(0,s.A)("/img/node-hardware-checks.png"),dark:(0,s.A)("/img/node-hardware-checks.png")},mdxType:"ThemedImage"}),(0,o.yg)("p",null,"  If  the hardware is good enough, there should not be any warning log message after the benchmarks logs shown in the screenshot above."),(0,o.yg)("h2",{id:"set-session-key"},"Set session key"),(0,o.yg)("p",null,"A session key needs to be registered. To do that, first perform the ",(0,o.yg)("inlineCode",{parentName:"p"},"author_rotateKeys")," RPC call in order to generate a new session key:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},'curl -H "Content-Type: application/json" \\\n--data \'{\n  "jsonrpc":"2.0",\n  "method":"author_rotateKeys",\n  "params":[],\n  "id":1\n}\' \\\nhttp://localhost:9934\n')),(0,o.yg)("p",null,"The output of the above command should be something like:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": "0xcc038816bd81c238bd1d163c48cea9c5e3b62899b8f193863f68268a719cca44"\n}\n')),(0,o.yg)("blockquote",null,(0,o.yg)("p",{parentName:"blockquote"},(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("em",{parentName:"strong"},"WARNING:"))," If the node exposes the RPC port to the internet, directly or through a reverse proxy, please make sure to restart the node with the argument ",(0,o.yg)("inlineCode",{parentName:"p"},"--rpc-methods safe")," so that RPC methods related to the collator keys cannot be called anymore. For more information, see the ",(0,o.yg)("a",{parentName:"p",href:"https://paritytech.github.io/devops-guide/guides/rpc_index.html?#important-flags-for-running-an-rpc-node"},"RPC Deployment")," page of the Parachain Devops guide.")),(0,o.yg)("p",null,"Next, submit the extrinsic ",(0,o.yg)("inlineCode",{parentName:"p"},"session.setKeys")," with the collator account to the Acurast Canary chain. The first parameter of the extrinsic call is the ",(0,o.yg)("inlineCode",{parentName:"p"},"result")," hex string in the output of the previous RPC call."),(0,o.yg)("p",null,"Any tool can be used to submit the extrinsic call, the important thing is that it is submitted by the collator account."),(0,o.yg)("p",null,"One option is to use the ",(0,o.yg)("a",{parentName:"p",href:"https://dotapps-io.ipns.dweb.link/?rpc=wss%3A%2F%2Fpublic-rpc.canary.acurast.com#/extrinsics"},"polkadotjs UI web app"),":"),(0,o.yg)(a.A,{width:"1000px",sources:{light:(0,s.A)("/img/set-session-keys.png"),dark:(0,s.A)("/img/set-session-keys.png")},mdxType:"ThemedImage"}),(0,o.yg)("p",null,"The screenshot above show how to call the ",(0,o.yg)("inlineCode",{parentName:"p"},"session.setKeys")," extrinsic, where the first drop down menu selects the account submitting the extrinsic (in this example, the account comes from the PolkadotJS Chrome extension)."),(0,o.yg)("p",null,"Then the ",(0,o.yg)("inlineCode",{parentName:"p"},"submit the following extrinsic")," box, the ",(0,o.yg)("inlineCode",{parentName:"p"},"session")," pallet and the ",(0,o.yg)("inlineCode",{parentName:"p"},"setKeys")," extrinsic are selected. Finally, provide the arguments: first the key, which corresponds to the result of the previous RPC call, and a ",(0,o.yg)("inlineCode",{parentName:"p"},"0x00")," for the proof argument."),(0,o.yg)("h2",{id:"register-as-candidate"},"Register as candidate"),(0,o.yg)("p",null,"Once the session key is registered, the collator can be registered as a candidate, this is done through the extrinsic ",(0,o.yg)("inlineCode",{parentName:"p"},"collatorSelection.registerAsCandidate"),", as before, the important thing is that the extrinsic is submitted by the collator account:"),(0,o.yg)(a.A,{width:"1000px",sources:{light:(0,s.A)("/img/register-as-candidate.png"),dark:(0,s.A)("/img/register-as-candidate.png")},mdxType:"ThemedImage"}),(0,o.yg)("p",null,"If the extrinsic is submitted successfully, the collator node is now fully onboarded and should start authoring blocks within 6-12 hours."))}g.isMDXComponent=!0},5680:(e,t,r)=>{r.d(t,{xA:()=>p,yg:()=>g});var n=r(6540);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(r),h=o,g=u["".concat(l,".").concat(h)]||u[h]||d[h]||a;return r?n.createElement(g,s(s({ref:t},p),{},{components:r})):n.createElement(g,s({ref:t},p))}));function g(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:o,s[1]=i;for(var c=2;c<a;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"}}]);