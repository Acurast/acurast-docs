(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3365],{530:()=>{},2202:()=>{},2615:()=>{},4021:()=>{},6126:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>copyShareUrl,r:()=>runCoinlibCode});var typescript__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8843),typescript__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(typescript__WEBPACK_IMPORTED_MODULE_0__),_predefined_methods_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7730);function replaceAll(e,n,t){return e.split(n).join(t)}const removeImports=e=>{const n=e.split("\n");let t=!0;return n.map((e=>{e.trim().startsWith("import")&&(t=!1);const n=t?e:void 0;return e.indexOf("@airgap/coinlib-core")>=0&&(t=!0),n})).filter((e=>!!e)).join("\n")},runCoinlibCode=(rawCode,setOutput)=>{let code=rawCode;const coinlib={};let output="";const appendOutput=e=>{output+="\n"+e,setOutput(output.trim())},myLog=(...e)=>{console.log("CODE_RUNNER:",...e),appendOutput(e.map((e=>"object"==typeof e?JSON.stringify(e,null,2):e)).join(" "))};let runnable;return code=replaceAll(code,"console.log(","progress("),code=code.replace(/(^|\s+)(print[(])/g,"progress("),code=removeImports(code),code=typescript__WEBPACK_IMPORTED_MODULE_0__.transpile(`({\n      run: async (coinlib: any, progress: any): string => {\n        Object.keys(coinlib).forEach(key => {\n          window[key] = coinlib[key]\n        })\n        return (async () => {\n          ${_predefined_methods_string__WEBPACK_IMPORTED_MODULE_1__.r};\n          ${code};\n          if (typeof result !== 'undefined') {\n            return result\n          }\n        })()\n      })`),new Promise((resolve=>{try{runnable=eval(code),runnable.run(coinlib,myLog).then((e=>{e&&appendOutput("Returned:\n"+JSON.stringify(e,null,2)),resolve(e)})).catch((e=>{console.warn(e),appendOutput(JSON.stringify(e,null,2)),resolve(e)}))}catch(e){appendOutput(e),console.error(e),resolve(e)}}))},copyShareUrl=e=>{const n=`https://${window.location.host}/playground?code=${btoa(e)}`;navigator.clipboard.writeText(n).catch((e=>console.error("Failed to copy to url!",e)))}},6247:()=>{},7664:()=>{},7730:(e,n,t)=>{"use strict";t.d(n,{r:()=>o});const o='export const fulfill = (payload: any) => {\n  console.log("fulfill", payload);\n  return payload;\n};\n\nexport const pack = (payload: any) => {\n  console.log("pack");\n  return payload;\n};\n\nexport const sign = (payload: any) => {\n  console.log("sign");\n  return payload;\n};\n\nexport const httpGET = async (\n  url: string,\n  headers: any,\n  successCallback: (response: any, certificate?: any, payload?: any) => string,\n  errorCallback: (error: Error) => void\n) => {\n  console.log("httpGET");\n  const response = await fetch(\n    "https://cors-proxy.airgap.prod.gke.papers.tech/proxy-with-fingerprint?url=" +\n      url,\n    {\n      method: "GET",\n      mode: "cors",\n      headers: headers,\n    }\n  );\n\n  // TODO: Handle non-json responses\n  const jsonPromise = response.json();\n  jsonPromise.then((res) => {\n    console.log("response", res);\n    successCallback(\n      JSON.stringify(res),\n      response.headers.get("X-Fingerprint256")\n    );\n  });\n\n  return jsonPromise;\n};\n\nexport const httpPOST = async (\n  url: string,\n  body: any,\n  headers: any,\n  successCallback: (payload: any, certificate?: any, response?: any) => string,\n  errorCallback: (error: Error) => void\n) => {\n  console.log("httpPOST");\n  const response = await fetch(url, {\n    method: "POST",\n    mode: "cors",\n    headers: headers,\n    body: body,\n  });\n\n  const text = response.text();\n\n  text.then((res) => {\n    successCallback(res);\n  });\n\n  return text;\n};\n\nexport const attest = (\n  nonce: string,\n  successCallback: (payload: any, certificate: any, response: any) => string,\n  errorCallback: (error: Error) => void\n) => {\n  console.log("attest");\n};\n\nexport const ownAddress = () => {\n  return "tz1xxxxxxx";\n};\n\nexport const generateSecureRandomHex = (): string => {\n  var buf = new Uint8Array(4);\n  window.crypto.getRandomValues(buf);\n  return Array.from(buf)\n    .map((x) => x.toString(16))\n    .join("");\n};\n\nexport const _STD_ = {\n  chains: {\n    ethereum: {\n      fulfill: async (rpc: string, destination: string, payload: string, extra: Record<string, any>, onSuccess: (opHash: string) => void, onError: (err: any) => void) => {\n        onSuccess("0x0123456789");\n      }\n    }\n  },\n  random: {\n    generateSecureRandomHex,\n  }\n};\n'},8641:()=>{},9387:e=>{function n(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=()=>[],n.resolve=n,n.id=9387,e.exports=n},9921:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>m});var o=t(8168),r=t(6540),s=t(6942),a=t.n(s),i=t(2796);const l=function(){if("undefined"==typeof window)return{width:999,height:999};const[e,n]=(0,r.useState)({width:window.innerWidth,height:window.innerHeight});return(0,r.useEffect)((()=>{function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e};var c=t(5293);const d=[],u=(0,r.lazy)((()=>Promise.all([t.e(1869),t.e(1569)]).then(t.bind(t,1569))));const p=function(e){let n;const{colorMode:t}=(0,c.G)();return r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading")},r.createElement(u,(0,o.A)({},e,{editorWillMount:function(t){n=t,t.editor.defineTheme("vs-dark",{base:"vs-dark",inherit:!0,rules:[{background:"121212"}],colors:{"editor.background":"#121212"}}),t.languages.typescript.typescriptDefaults.setCompilerOptions({target:t.languages.typescript.ScriptTarget.ES2017,allowNonTsExtensions:!0,moduleResolution:t.languages.typescript.ModuleResolutionKind.NodeJs,module:t.languages.typescript.ModuleKind.ESNext,typeRoots:["node_modules/@types"]}),d.forEach((e=>{const n=`file:///node_modules/${e.name}`;t.languages.typescript.typescriptDefaults.addExtraLib(e.dts,n)})),e.editorWillMount&&e.editorWillMount(t)},editorWillUnmount:()=>{},editorDidMount:function(t){t.setModel(n.editor.createModel(e.value,"typescript",n.Uri.parse(`file:///main-${Math.random()}.ts`)))},theme:"dark"===t?"vs-dark":"vs-light"})))},g="runbox__boR",_="row_BFIh";let h=function(e){return e[e.INIT=0]="INIT",e[e.STARTED=1]="STARTED",e[e.ENDED=2]="ENDED",e}({});var y=t(6126);const m=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search),n=e.has("code")?atob(e.get("code")):"// This is an example\n\nconst test = 'Acurast'\n\nconsole.log(test)\n\nconsole.log('fulfill', fulfill())\nconsole.log('ownAddress', ownAddress())\nconsole.log('generateSecureRandomHex', generateSecureRandomHex())\n",[t,s]=(0,r.useState)(n),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(h.INIT),w=l(),b=100,f={xs:{width:w.width,height:200},lg:{width:.6*w.width,height:w.height-b}},E={xs:{width:w.width,height:w.height-b-f.xs.height},lg:{width:(.4-.05)*w.width,height:w.height}},x=async()=>{d(""),m(h.INIT)};return r.createElement(i.A,{title:"Acurast",description:"Acurast Playground",noFooter:!0},r.createElement("div",{className:a()(g)},r.createElement("button",{onClick:async()=>{u!==h.STARTED&&(await x(),m(h.STARTED),await(0,y.r)(t,d),m(h.ENDED))},className:"button button--primary margin-bottom--lg margin-right--xs"},"Run Code"),r.createElement("button",{onClick:x,className:"button button--secondary margin-bottom--lg margin-right--xs"},"Clear Output"),r.createElement("button",{onClick:function(){(0,y.Y)(t)},className:"button button--secondary margin-bottom--lg margin-right--xs"},"Share Code (Copy to Clipboard)")),r.createElement("div",{className:a()(_)},r.createElement(p,(0,o.A)({},w.width>600?f.lg:f.xs,{language:"typescript",value:t,onChange:e=>{s(e)},options:{minimap:{enabled:!1},wordWrap:"on"}})),r.createElement(p,(0,o.A)({},w.width>600?E.lg:E.xs,{language:"bash",value:c,options:{readOnly:!0,minimap:{enabled:!1},wordWrap:"on"}}))))}}}]);