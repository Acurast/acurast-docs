"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6167],{720:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var r=n(8168),a=(n(6540),n(5680));n(1653),n(6025);const l={title:"Post-mortem - Acurast Air Drop",slug:"/post-mortem/2026-01-27-airdrop"},o=void 0,i={unversionedId:"post-mortem/2026-01-27-airdrop",id:"post-mortem/2026-01-27-airdrop",title:"Post-mortem - Acurast Air Drop",description:"Date: 2026-02-02",source:"@site/docs/post-mortem/2026-01-27-airdrop.mdx",sourceDirName:"post-mortem",slug:"/post-mortem/2026-01-27-airdrop",permalink:"/post-mortem/2026-01-27-airdrop",draft:!1,editUrl:"https://github.com/acurast/acurast-docs/docs/post-mortem/2026-01-27-airdrop.mdx",tags:[],version:"current",frontMatter:{title:"Post-mortem - Acurast Air Drop",slug:"/post-mortem/2026-01-27-airdrop"},sidebar:"docs",previous:{title:"FAQ",permalink:"/faq"}},s={},u=[{value:"Summary",id:"summary",level:2},{value:"Impact",id:"impact",level:2},{value:"Detection",id:"detection",level:2},{value:"Root Causes",id:"root-causes",level:2},{value:"Trigger",id:"trigger",level:2},{value:"Resolution",id:"resolution",level:2},{value:"Action Items",id:"action-items",level:2},{value:"Timeline",id:"timeline",level:2},{value:"Lessons Learned",id:"lessons-learned",level:2},{value:"What went well",id:"what-went-well",level:3},{value:"What went wrong",id:"what-went-wrong",level:3},{value:"Conclusion",id:"conclusion",level:3}],p={toc:u},c="wrapper";function d({components:e,...t}){return(0,a.yg)(c,(0,r.A)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Date:")," 2026-02-02"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Authors:")," Mike Godenzi"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Status:")," Complete"),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"summary"},"Summary"),(0,a.yg)("p",null,"On the 27th of January 2026, Acurast launched the Air Drop event that allowed users of the Cloud Rebellion to receive ACU tokens on Acurast Mainnet."),(0,a.yg)("p",null,"The received tokens were supposed to be locked in a vesting schedule for 24 months. Unfortunately some users were able to receive the ACU tokens partially or fully unlocked."),(0,a.yg)("h2",{id:"impact"},"Impact"),(0,a.yg)("p",null,"Some of the users that claimed their Air Drop received the claimed ACU tokens partially or fully unlocked. Before the system was shut down, around 600'000 ACU tokens were claimed."),(0,a.yg)("h2",{id:"detection"},"Detection"),(0,a.yg)("p",null,"Users reported being able to transfers the tokens that were just claimed for the Air Drop."),(0,a.yg)("h2",{id:"root-causes"},"Root Causes"),(0,a.yg)("p",null,"The Air Drop functionality is implemented in the ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Acurast/acurast-substrate/tree/acurast-v0.23.14/pallets/token-claim"},"pallet-acurast-token-claim")," pallet.\nThe claim functionality would transfer the claimed amount to the provided address and setup a vesting schedule through Substrate's ",(0,a.yg)("a",{parentName:"p",href:"https://docs.rs/pallet-vesting/latest/pallet_vesting/"},"pallet-vesting")," pallet. This vesting pallet places a lock on the user's account balance for the amount specified, which in this case is the Air Drop claimed amount. Users are then able to call the ",(0,a.yg)("inlineCode",{parentName:"p"},"vest")," extrinsic on ",(0,a.yg)("inlineCode",{parentName:"p"},"pallet-vesting")," to released from the lock the vested token so far."),(0,a.yg)("p",null,"Users are also able to convert cACU token from the Acurast Canary network to Mainnet ACU tokens via the ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Acurast/acurast-substrate/tree/acurast-v0.23.14/pallets/token-conversion"},"pallet-acurast-token-conversion")," pallet. The converted tokens are placed in a ",(0,a.yg)("inlineCode",{parentName:"p"},"Hold")," state on the user's account."),(0,a.yg)("p",null,"The issue occurred because the lock used by ",(0,a.yg)("inlineCode",{parentName:"p"},"pallet-vesting")," to lock up the claimed token is an overlapping lock that also takes into consideration the balance on ",(0,a.yg)("inlineCode",{parentName:"p"},"Hold"),". This means that if a user used both the cACU to ACU conversion feature and the Air Drop claim, the converted balances would be counted in the locked balance in the vesting pallet, allowing the additional claimed Air Drop amount to be unlocked."),(0,a.yg)("h2",{id:"trigger"},"Trigger"),(0,a.yg)("p",null,"Any user using both the cACU to ACU conversion and the Air Drop claim features would trigger the issue described above."),(0,a.yg)("h2",{id:"resolution"},"Resolution"),(0,a.yg)("p",null,"At first, the Air Drop feature was disabled, then it was re-implemented to not use the ",(0,a.yg)("a",{parentName:"p",href:"https://docs.rs/pallet-vesting/latest/pallet_vesting/"},"pallet-vesting")," pallet.\nInstead now the claimed amount is not right away sent to the user's account, but rather booked internally by the ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Acurast/acurast-substrate/tree/acurast-v0.23.14/pallets/token-claim"},"pallet-acurast-token-claim")," pallet and only released to the user's account when the ",(0,a.yg)("inlineCode",{parentName:"p"},"vest")," extrinsic is called."),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"action-items"},"Action Items"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Action Item"),(0,a.yg)("th",{parentName:"tr",align:null},"Type"),(0,a.yg)("th",{parentName:"tr",align:null},"Owner"),(0,a.yg)("th",{parentName:"tr",align:null},"State"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Disabling of Air Drop feature"),(0,a.yg)("td",{parentName:"tr",align:null},"mitigate"),(0,a.yg)("td",{parentName:"tr",align:null},"Andreas Gassmann"),(0,a.yg)("td",{parentName:"tr",align:null},"DONE")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Implementation of long term fix"),(0,a.yg)("td",{parentName:"tr",align:null},"prevent"),(0,a.yg)("td",{parentName:"tr",align:null},"Simon Wehrli"),(0,a.yg)("td",{parentName:"tr",align:null},"DONE")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"Acurast Mainnet runtime upgrade to deploy fix"),(0,a.yg)("td",{parentName:"tr",align:null},"process"),(0,a.yg)("td",{parentName:"tr",align:null},"Mike Godenzi"),(0,a.yg)("td",{parentName:"tr",align:null},"DONE")))),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"timeline"},"Timeline"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"2026-01-27 12:30 UTC")," - Air Drop functionality released"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"2026-01-27 14:30 UTC")," - Air Drop issue surfaced and functionality disabled"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"2026-02-03")," - Corrected Air Drop functionality re-released")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"lessons-learned"},"Lessons Learned"),(0,a.yg)("h3",{id:"what-went-well"},"What went well"),(0,a.yg)("p",null,"Once the issue was surfaced, the Air Drop functionality was quickly disabled."),(0,a.yg)("h3",{id:"what-went-wrong"},"What went wrong"),(0,a.yg)("p",null,"The issues took too long to surface."),(0,a.yg)("h3",{id:"conclusion"},"Conclusion"),(0,a.yg)("p",null,"It is not trivial to coordinate different subsystems that handle receiving and locking of some tokens on a user's account in a way that do not interfere with each other."),(0,a.yg)("p",null,"Either the subsystems need to tightly coordinate and carefully lock/unlock the proper amounts, or they should be fully independent and do not use the shared locking system. "),(0,a.yg)("p",null,"Going forward, similar features can be fully tested on the Canary network before enabling them on Mainnet."))}d.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>g});var r=n(6540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef(function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=a,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||l;return n?r.createElement(g,o(o({ref:t},p),{},{components:n})):r.createElement(g,o({ref:t},p))});function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);